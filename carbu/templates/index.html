{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% block content %}
<h1>Données</h1>
<form action="{{ url_for('build') }}" method="post" class="row g-3 needs-validation" novalidate>

    <div class="col-12">
        <label for="name">Prénom Nom</label>
        <input type="text" class="form-control" id="name" name="name" required>
    </div>
    <div class="col-9">
        <label for="street">Rue</label>
        <input type="text" class="form-control" id="street" name="street" required>
    </div>
    <div class="col-3">
        <label for="building">Numéro</label>
        <input type="text" class="form-control" id="building" name="building">
    </div>

    <div class="col-3">
        <label for="zipcode">Code postal</label>
        <input type="text" class="form-control" id="zipcode" name="zipcode" required>
    </div>
    <div class="col-9">
        <label for="city">Localité</label>
        <input type="text" class="form-control" id="city" name="city" required>
    </div>

    <div class="col-md-6">
        <label for="number">Numéro de compte prépayé</label>
        <input type="text" class="form-control" id="number" name="number" required>
    </div>
    <div class="col-md-6">
        <label for="amount">Montant à recharger (CHF)</label>
        <input type="number" step="0.01" class="form-control" id="amount" name="amount" required>
    </div>
    <button type="submit" class="btn btn-primary">Envoyer</button>
</form>
{% endblock %}
{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded",
        function () {
            if (typeof (Storage) !== "undefined") {
                const fields = ["name", "street", "building", "zipcode", "city", "number", "amount"];
                fields.forEach(function (field) {
                    const element = document.getElementById(field);
                    element.value = localStorage.getItem(field) || "";
                    element.addEventListener("input", function () {
                        localStorage.setItem(field, element.value);
                    });
                });
            }
        });
</script>
{% endblock %}